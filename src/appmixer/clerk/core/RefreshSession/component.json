{
    "name": "appmixer.clerk.core.RefreshSession",
    "description": "Refreshes a session by creating a new session token. A 401 is returned when there are validation errors, which signals the SDKs to fallback to the handshake flow.",
    "author": "Appmixer <info@appmixer.com>",
    "version": "1.0.0",
    "auth": {
        "service": "appmixer:clerk"
    },
    "quota": {
        "manager": "appmixer:clerk",
        "resources": "requests"
    },
    "inPorts": [
        {
            "name": "in",
            "schema": {
                "type": "object",
                "properties": {
                    "sessionId": {
                        "type": "string"
                    },
                    "expiredToken": {
                        "type": "string"
                    },
                    "refreshToken": {
                        "type": "string"
                    },
                    "requestOrigin": {
                        "type": "string"
                    },
                    "requestHeaders": {
                        "type": "object"
                    },
                    "format": {
                        "type": "string",
                        "enum": ["token", "cookie"]
                    },
                    "requestOriginatingIp": {
                        "type": "string"
                    }
                },
                "required": ["sessionId", "expiredToken", "refreshToken", "requestOrigin"]
            },
            "inspector": {
                "inputs": {
                    "sessionId": {
                        "type": "text",
                        "label": "Session ID",
                        "tooltip": "The ID of the session to refresh",
                        "index": 1
                    },
                    "expiredToken": {
                        "type": "text",
                        "label": "Expired Token",
                        "tooltip": "The JWT that is sent via the __session cookie from your frontend. Note: this JWT must be associated with the supplied session ID.",
                        "index": 2
                    },
                    "refreshToken": {
                        "type": "text",
                        "label": "Refresh Token",
                        "tooltip": "The JWT that is sent via the __session cookie from your frontend.",
                        "index": 3
                    },
                    "requestOrigin": {
                        "type": "text",
                        "label": "Request Origin",
                        "tooltip": "The origin of the request.",
                        "index": 4
                    },
                    "requestHeaders": {
                        "type": "textarea",
                        "label": "Request Headers",
                        "tooltip": "The headers of the request as JSON object.",
                        "index": 5
                    },
                    "format": {
                        "type": "select",
                        "label": "Format",
                        "tooltip": "The format of the response.",
                        "options": [
                            {
                                "label": "Token",
                                "value": "token"
                            },
                            {
                                "label": "Cookie",
                                "value": "cookie"
                            }
                        ],
                        "index": 6
                    },
                    "requestOriginatingIp": {
                        "type": "text",
                        "label": "Request Originating IP",
                        "tooltip": "The IP address of the request.",
                        "index": 7
                    }
                }
            }
        }
    ],
    "outPorts": [
        {
            "name": "out",
            "options": [
                {
                    "label": "Session",
                    "value": "session",
                    "schema": {
                        "type": "object"
                    }
                },
                {
                    "label": "Token",
                    "value": "token",
                    "schema": {
                        "type": "string"
                    }
                },
                {
                    "label": "Refresh Token",
                    "value": "refreshToken",
                    "schema": {
                        "type": "string"
                    }
                },
                {
                    "label": "Cookies",
                    "value": "cookies",
                    "schema": {
                        "type": "array"
                    }
                }
            ]
        }
    ],
    "icon": "data:image/svg+xml;base64,PHN2ZyByb2xlPSJpbWciIHZpZXdCb3g9IjAgMCAyNCAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiBpZD0iQ2xlcmstLVN0cmVhbWxpbmUtU2ltcGxlLUljb25zIiBoZWlnaHQ9IjI0IiB3aWR0aD0iMjQiPgogIDxkZXNjPgogICAgQ2xlcmsgU3RyZWFtbGluZSBJY29uOiBodHRwczovL3N0cmVhbWxpbmVocS5jb20KICA8L2Rlc2M+CiAgPHRpdGxlPkNsZXJrPC90aXRsZT4KICA8cGF0aCBkPSJtMjEuNDcgMjAuODI5IC0yLjg4MSAtMi44ODFhMC41NzIgMC41NzIgMCAwIDAgLTAuNyAtMC4wODQgNi44NTQgNi44NTQgMCAwIDEgLTcuMDgxIDAgMC41NzYgMC41NzYgMCAwIDAgLTAuNyAwLjA4NGwtMi44ODEgMi44ODFhMC41NzYgMC41NzYgMCAwIDAgLTAuMTAzIDAuNjkgMC41NyAwLjU3IDAgMCAwIDAuMTY2IDAuMTg2IDEyIDEyIDAgMCAwIDE0LjExMyAwIDAuNTggMC41OCAwIDAgMCAwLjIzOSAtMC40MjMgMC41NzYgMC41NzYgMCAwIDAgLTAuMTcyIC0wLjQ1M1ptMC4wMDIgLTE3LjY2OCAtMi44OCAyLjg4YTAuNTY5IDAuNTY5IDAgMCAxIC0wLjcwMSAwLjA4NEE2Ljg1NyA2Ljg1NyAwIDAgMCA4LjcyNCA4LjA4YTYuODYyIDYuODYyIDAgMCAwIC0xLjIyMiAzLjY5MiA2Ljg2IDYuODYgMCAwIDAgMC45NzggMy43NjQgMC41NzMgMC41NzMgMCAwIDEgLTAuMDgzIDAuNjk5bC0yLjg4MSAyLjg4YTAuNTY3IDAuNTY3IDAgMCAxIC0wLjg2NCAtMC4wNjNBMTEuOTkzIDExLjk5MyAwIDAgMSA2Ljc3MSAyLjdhMTEuOTkgMTEuOTkgMCAwIDEgMTQuNjM3IC0wLjQwNSAwLjU2NiAwLjU2NiAwIDAgMSAwLjIzMiAwLjQxOCAwLjU3IDAuNTcgMCAwIDEgLTAuMTY4IDAuNDQ4Wm0tNy4xMTggMTIuMjYxYTMuNDI3IDMuNDI3IDAgMSAwIDAgLTYuODU0IDMuNDI3IDMuNDI3IDAgMCAwIDAgNi44NTRaIiBmaWxsPSIjMDAwMDAwIiBzdHJva2Utd2lkdGg9IjEiPjwvcGF0aD4KPC9zdmc+"
}
