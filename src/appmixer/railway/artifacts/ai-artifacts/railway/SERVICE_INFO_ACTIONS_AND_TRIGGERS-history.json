[
    {
        "role": "user",
        "content": "# Railway Connector Development Context\n\n## Service Overview\n\nRailway is a cloud platform that provides infrastructure for developers to build, deploy, and scale applications. It offers a modern approach to application deployment with features like:\n\n- **Project Management**: Create and manage projects containing multiple services\n- **Service Deployment**: Deploy applications from GitHub repositories or Docker images\n- **Environment Variables**: Manage configuration and secrets\n- **Environment Management**: Support for multiple environments (production, staging, etc.)\n- **Database Services**: Provision and manage databases\n- **Custom Domains**: Configure custom domains for applications\n- **Build and Deploy Pipeline**: Automatic builds and deployments from Git\n\n## API Information\n\n### API Type and Endpoint\n- **API Type**: GraphQL\n- **Endpoint**: `https://backboard.railway.com/graphql/v2`\n- **Documentation**: https://docs.railway.com/guides/public-api\n- **GraphiQL Playground**: https://railway.com/graphiql\n\n### Authentication Method\nRailway API uses **Bearer Token Authentication** with three types of tokens:\n\n1. **Account Token** (Personal Token)\n   - Access to all personal resources and teams the user belongs to\n   - Should not be shared with others\n   - Created at: https://railway.com/account/tokens\n\n2. **Team Token**\n   - Access only to team resources\n   - Cannot access personal resources\n   - Safe to share with team members\n   - Created at: https://railway.com/account/tokens\n\n3. **Project Token**\n   - Scoped to a specific environment within a project\n   - Limited access to that specific environment only\n   - Created in project settings\n\n**Authentication Headers**:\n- Account/Team tokens: `Authorization: Bearer <token>`\n- Team tokens (alternative): `Team-Access-Token: <token>`\n- Project tokens: `Project-Access-Token: <token>`\n\n**How to obtain tokens**:\n1. Log into Railway dashboard\n2. Navigate to Account Settings â†’ Tokens page: https://railway.com/account/tokens\n3. Click \"New Token\" button\n4. Select team (for team token) or leave blank (for account token)\n5. Provide a descriptive name for the token\n6. Copy the generated token (shown only once)\n\n### Rate Limits\n- **Hourly Limit**: 1000 requests per hour\n- **Rate Limit (RPS)**: \n  - Hobby users: 10 RPS\n  - Pro users: 50 RPS\n  - Enterprise: Custom limits\n\n**Rate limit headers**:\n- `X-RateLimit-Limit`: Maximum requests allowed per day\n- `X-RateLimit-Remaining`: Remaining requests in current window\n- `X-RateLimit-Reset`: When the current window resets\n- `Retry-After`: Time to wait before next request (when rate limited)\n\n## Component Planning\n\nBased on the Railway API capabilities and common use cases, the following components should be implemented:\n\n### Core Project Management\n1. **ListProjects**\n   - Description: Retrieve all projects accessible to the authenticated user\n   - GraphQL Query: Uses `me { projects { edges { node { ... } } } }`\n   - Output: Array of projects with basic information (id, name, services, environments)\n\n2. **CreateProject**\n   - Description: Create a new project\n   - GraphQL Mutation: `projectCreate`\n   - Input: Project name, description (optional), team ID (optional)\n   - Output: Created project details\n\n3. **DeleteProject**\n   - Description: Delete an existing project (destructive action)\n   - GraphQL Mutation: `projectDelete(id: \"project-id\")`\n   - Input: Project ID\n   - Output: Success confirmation\n\n### Service Management\n4. **CreateService**\n   - Description: Create a new service within a project with GitHub repo or Docker image\n   - GraphQL Mutation: `serviceCreate`\n   - Input: Project ID, source (GitHub repo or Docker image), name (optional)\n   - Output: Created service details\n\n5. **ListServices**\n   - Description: List all services within a project\n   - GraphQL Query: Part of project query\n   - Input: Project ID\n   - Output: Array of services with details\n\n6. **UpdateService**\n   - Description: Update service configuration\n   - GraphQL Mutation: `serviceUpdate`\n   - Input: Service ID, updated configuration\n   - Output: Updated service details\n\n7. **DeleteService**\n   - Description: Delete a service from a project\n   - GraphQL Mutation: `serviceDelete`\n   - Input: Service ID\n   - Output: Success confirmation\n\n### Deployment Management\n8. **DeployService**\n   - Description: Trigger a new deployment for a service\n   - GraphQL Mutation: Trigger deployment\n   - Input: Service ID, environment ID\n   - Output: Deployment details\n\n9. **ListDeployments**\n   - Description: Get deployment history for a service\n   - GraphQL Query: `deployments`\n   - Input: Project ID, Service ID, Environment ID\n   - Output: Array of deployments with status and details\n\n10. **RestartDeployment**\n    - Description: Restart an existing deployment\n    - GraphQL Mutation: `deploymentRestart(id: \"deployment-id\")`\n    - Input: Deployment ID\n    - Output: Success confirmation\n\n11. **GetDeploymentLogs**\n    - Description: Retrieve logs for a specific deployment\n    - GraphQL Query: Deployment logs query\n    - Input: Deployment ID\n    - Output: Log entries\n\n### Environment Variables Management\n12. **ListVariables**\n    - Description: Get all environment variables for a service or shared environment variables\n    - GraphQL Query: `variables`\n    - Input: Project ID, Environment ID, Service ID (optional for shared variables)\n    - Output: Key-value pairs of variables\n\n13. **SetVariable**\n    - Description: Create or update an environment variable\n    - GraphQL Mutation: `variableUpsert`\n    - Input: Project ID, Environment ID, Service ID (optional), variable name, variable value\n    - Output: Success confirmation\n\n14. **DeleteVariable**\n    - Description: Remove an environment variable\n    - GraphQL Mutation: `variableDelete`\n    - Input: Project ID, Environment ID, Service ID (optional), variable name\n    - Output: Success confirmation\n\n### Environment Management\n15. **ListEnvironments**\n    - Description: Get all environments within a project\n    - GraphQL Query: Part of project query\n    - Input: Project ID\n    - Output: Array of environments\n\n16. **CreateEnvironment**\n    - Description: Create a new environment in a project\n    - GraphQL Mutation: `environmentCreate`\n    - Input: Project ID, environment name\n    - Output: Created environment details\n\n### Monitoring and Status\n17. **GetServiceStatus**\n    - Description: Get current status and health of a service\n    - GraphQL Query: Service status query\n    - Input: Service ID\n    - Output: Service status, health metrics, resource usage\n\n18. **GetProjectUsage**\n    - Description: Get usage metrics for a project\n    - GraphQL Query: Project usage query\n    - Input: Project ID, time range (optional)\n    - Output: Usage statistics, billing information\n\n## GraphQL Schema Insights\n\n### Key Data Types\n- **Project**: Contains services, environments, and configurations\n- **Service**: Represents a deployed application or database\n- **Environment**: Deployment environment (production, staging, etc.)\n- **Deployment**: Individual deployment instance\n- **Variable**: Environment variable configuration\n\n### Common Input Patterns\n- Most mutations require `projectId`\n- Service operations require `serviceId`\n- Environment-specific operations require `environmentId`\n- Variables can be service-specific or shared at environment level\n\n### Error Handling\n- GraphQL errors for invalid queries/mutations\n- Authentication errors for invalid tokens\n- Rate limiting errors when limits exceeded\n- Validation errors for invalid input data\n\n## Implementation Notes\n\n### Authentication Implementation\nUse Bearer token authentication with the format:\n```javascript\nheaders: {\n    'Authorization': `Bearer ${context.auth.accessToken}`,\n    'Content-Type': 'application/json'\n}\n```\n\n### GraphQL Request Structure\nAll requests should be POST to `https://backboard.railway.com/graphql/v2` with:\n```javascript\n{\n    query: \"graphql query/mutation string\",\n    variables: { /* query variables */ }\n}\n```\n\n### Error Handling Strategy\n- Check for GraphQL errors in response\n- Handle rate limiting with appropriate retry logic\n- Validate required inputs before making API calls\n- Provide clear error messages for authentication failures\n\n### Component Prioritization\n**High Priority (Essential)**:\n1. ListProjects\n2. CreateService\n3. DeployService\n4. ListDeployments\n5. SetVariable\n6. ListVariables\n\n**Medium Priority (Important)**:\n7. CreateProject\n8. ListServices\n9. RestartDeployment\n10. DeleteService\n\n**Lower Priority (Nice-to-have)**:\n11. DeleteProject\n12. GetDeploymentLogs\n13. GetServiceStatus\n14. Environment management components\n\n## API Reference Links\n- **Main API Guide**: https://docs.railway.com/guides/public-api\n- **Manage Projects**: https://docs.railway.com/guides/manage-projects\n- **Manage Services**: https://docs.railway.com/guides/manage-services\n- **Manage Deployments**: https://docs.railway.com/guides/manage-deployments\n- **Manage Variables**: https://docs.railway.com/guides/manage-variables\n- **API Reference**: https://docs.railway.com/reference/public-api\n- **GraphiQL Playground**: https://railway.com/graphiql\n- **Token Management**: https://railway.com/account/tokens\n\n## Additional Resources\n- **Discord Support**: https://discord.gg/railway\n- **API Collection File**: https://gql-collection-server.up.railway.app/railway_graphql_collection.json\n- **Company Website**: https://railway.com"
    },
    {
        "role": "system",
        "content": "I am planning to build an integration component for railway. Could you provide me with a list and description of the most commonly used and essential API endpoints for this service? Specifically, I am interested in endpoints related to core operations. For each endpoint, please include the HTTP method (GET, POST, PUT, PATCH, DELETE), the endpoint URL or path, link to documentation, a brief description of its purpose, provide list of inputs. If possible, also mention any authentication requirements."
    },
    {
        "role": "user",
        "content": "Create the service json as well, (serviceJson property)"
    },
    {
        "role": "user",
        "content": "ignore input parameters for pagination, it could be for example page, offset, limit, etc."
    },
    {
        "role": "user",
        "content": "Action naming conventions: Try to avoid naming with \"List\", such as \"List Users\", \"List Contacts\" etc. Use \"Find\" instead. For example \"Find Users\", \"FInd Contacts\". These actions have usually input parameters for search, such as \"query\", \"search\" or similar."
    },
    {
        "role": "user",
        "content": "Provide information about authentication, include type of authentication, and other properties. Provide information about authentication endpoint URL, token URL for managing access token - for obtaining access token and refreshing access token. Provide information about profile info URL, where is possible to get information about current user. It is used for getting user profile information, such as email, name, etc. (authentication property)"
    },
    {
        "role": "assistant",
        "content": "{\n  \"actions\": [\n    {\n      \"title\": \"Find Projects\",\n      \"description\": \"Retrieve all projects accessible to the authenticated user. Optionally, you can provide a search query to filter the projects.\",\n      \"type\": \"action\",\n      \"documentation\": \"https://docs.railway.com/guides/manage-projects\",\n      \"endpointUrl\": \"https://backboard.railway.com/graphql/v2\",\n      \"apiBaseUrl\": \"https://backboard.railway.com\",\n      \"method\": \"POST\",\n      \"sampleResponse\": {\n        \"data\": {\n          \"me\": {\n            \"projects\": {\n              \"edges\": [\n                {\n                  \"node\": {\n                    \"id\": \"project-id\",\n                    \"name\": \"Project Name\",\n                    \"services\": [],\n                    \"environments\": []\n                  }\n                }\n              ]\n            }\n          }\n        }\n      },\n      \"inputSchema\": {\n        \"type\": \"object\",\n        \"properties\": {\n          \"search\": {\n            \"type\": \"string\",\n            \"description\": \"Optional search query to filter projects by name or other criteria.\"\n          }\n        }\n      },\n      \"outputType\": {\n        \"outputType\": \"array\",\n        \"arrayPropertyValue\": \"projects\"\n      }\n    },\n    {\n      \"title\": \"Create Project\",\n      \"description\": \"Create a new project by providing a project name, an optional description, and an optional team ID.\",\n      \"type\": \"action\",\n      \"documentation\": \"https://docs.railway.com/guides/manage-projects\",\n      \"endpointUrl\": \"https://backboard.railway.com/graphql/v2\",\n      \"apiBaseUrl\": \"https://backboard.railway.com\",\n      \"method\": \"POST\",\n      \"sampleResponse\": {\n        \"data\": {\n          \"projectCreate\": {\n            \"id\": \"new-project-id\",\n            \"name\": \"New Project\",\n            \"description\": \"Optional project description\"\n          }\n        }\n      },\n      \"inputSchema\": {\n        \"type\": \"object\",\n        \"properties\": {\n          \"name\": {\n            \"type\": \"string\",\n            \"description\": \"The name of the project.\"\n          },\n          \"description\": {\n            \"type\": \"string\",\n            \"description\": \"Optional project description.\"\n          },\n          \"teamId\": {\n            \"type\": \"string\",\n            \"description\": \"Optional team identifier if the project is linked to a team.\"\n          }\n        }\n      },\n      \"outputType\": {\n        \"outputType\": \"object\"\n      }\n    },\n    {\n      \"title\": \"Create Service\",\n      \"description\": \"Create a new service within an existing project by specifying the source (GitHub repository or Docker image) and optionally a service name.\",\n      \"type\": \"action\",\n      \"documentation\": \"https://docs.railway.com/guides/manage-services\",\n      \"endpointUrl\": \"https://backboard.railway.com/graphql/v2\",\n      \"apiBaseUrl\": \"https://backboard.railway.com\",\n      \"method\": \"POST\",\n      \"sampleResponse\": {\n        \"data\": {\n          \"serviceCreate\": {\n            \"id\": \"service-id\",\n            \"name\": \"Service Name\",\n            \"status\": \"created\"\n          }\n        }\n      },\n      \"inputSchema\": {\n        \"type\": \"object\",\n        \"properties\": {\n          \"projectId\": {\n            \"type\": \"string\",\n            \"description\": \"The identifier of the project where the service will be created.\"\n          },\n          \"source\": {\n            \"type\": \"string\",\n            \"description\": \"The source of the service deployment (GitHub repository URL or Docker image identifier).\"\n          },\n          \"name\": {\n            \"type\": \"string\",\n            \"description\": \"Optional name for the new service.\"\n          }\n        }\n      },\n      \"outputType\": {\n        \"outputType\": \"object\"\n      }\n    },\n    {\n      \"title\": \"Deploy Service\",\n      \"description\": \"Trigger a new deployment for a specified service within a designated environment.\",\n      \"type\": \"action\",\n      \"documentation\": \"https://docs.railway.com/guides/manage-deployments\",\n      \"endpointUrl\": \"https://backboard.railway.com/graphql/v2\",\n      \"apiBaseUrl\": \"https://backboard.railway.com\",\n      \"method\": \"POST\",\n      \"sampleResponse\": {\n        \"data\": {\n          \"deployService\": {\n            \"id\": \"deployment-id\",\n            \"status\": \"deployed\",\n            \"createdAt\": \"2023-10-10T12:34:56Z\"\n          }\n        }\n      },\n      \"inputSchema\": {\n        \"type\": \"object\",\n        \"properties\": {\n          \"serviceId\": {\n            \"type\": \"string\",\n            \"description\": \"The identifier of the service to deploy.\"\n          },\n          \"environmentId\": {\n            \"type\": \"string\",\n            \"description\": \"The identifier of the environment where the service will be deployed.\"\n          }\n        }\n      },\n      \"outputType\": {\n        \"outputType\": \"object\"\n      }\n    },\n    {\n      \"title\": \"Find Deployments\",\n      \"description\": \"Retrieve the deployment history for a given service in a project. You can optionally filter the results with a search query.\",\n      \"type\": \"action\",\n      \"documentation\": \"https://docs.railway.com/guides/manage-deployments\",\n      \"endpointUrl\": \"https://backboard.railway.com/graphql/v2\",\n      \"apiBaseUrl\": \"https://backboard.railway.com\",\n      \"method\": \"POST\",\n      \"sampleResponse\": {\n        \"data\": {\n          \"deployments\": {\n            \"edges\": [\n              {\n                \"node\": {\n                  \"id\": \"deployment-id\",\n                  \"status\": \"success\",\n                  \"deployedAt\": \"2023-10-10T12:34:56Z\"\n                }\n              }\n            ]\n          }\n        }\n      },\n      \"inputSchema\": {\n        \"type\": \"object\",\n        \"properties\": {\n          \"projectId\": {\n            \"type\": \"string\",\n            \"description\": \"The project identifier for which deployment history is requested.\"\n          },\n          \"serviceId\": {\n            \"type\": \"string\",\n            \"description\": \"The service identifier for which deployment history is requested.\"\n          },\n          \"environmentId\": {\n            \"type\": \"string\",\n            \"description\": \"The environment identifier associated with the deployments.\"\n          },\n          \"search\": {\n            \"type\": \"string\",\n            \"description\": \"Optional search query to filter deployments.\"\n          }\n        }\n      },\n      \"outputType\": {\n        \"outputType\": \"array\",\n        \"arrayPropertyValue\": \"deployments\"\n      }\n    },\n    {\n      \"title\": \"Upsert Variable\",\n      \"description\": \"Create or update an environment variable for a specific service or at the environment level.\",\n      \"type\": \"action\",\n      \"documentation\": \"https://docs.railway.com/guides/manage-variables\",\n      \"endpointUrl\": \"https://backboard.railway.com/graphql/v2\",\n      \"apiBaseUrl\": \"https://backboard.railway.com\",\n      \"method\": \"POST\",\n      \"sampleResponse\": {\n        \"data\": {\n          \"variableUpsert\": {\n            \"success\": true\n          }\n        }\n      },\n      \"inputSchema\": {\n        \"type\": \"object\",\n        \"properties\": {\n          \"projectId\": {\n            \"type\": \"string\",\n            \"description\": \"The project ID where the variable exists.\"\n          },\n          \"environmentId\": {\n            \"type\": \"string\",\n            \"description\": \"The environment ID for scoping the variable.\"\n          },\n          \"serviceId\": {\n            \"type\": \"string\",\n            \"description\": \"Optional service ID if the variable is service-specific.\"\n          },\n          \"name\": {\n            \"type\": \"string\",\n            \"description\": \"The name of the environment variable.\"\n          },\n          \"value\": {\n            \"type\": \"string\",\n            \"description\": \"The value to assign to the environment variable.\"\n          }\n        }\n      },\n      \"outputType\": {\n        \"outputType\": \"object\"\n      }\n    },\n    {\n      \"title\": \"Find Variables\",\n      \"description\": \"Retrieve environment variables for a given service or at an environment level. A search query can be provided to filter variable names.\",\n      \"type\": \"action\",\n      \"documentation\": \"https://docs.railway.com/guides/manage-variables\",\n      \"endpointUrl\": \"https://backboard.railway.com/graphql/v2\",\n      \"apiBaseUrl\": \"https://backboard.railway.com\",\n      \"method\": \"POST\",\n      \"sampleResponse\": {\n        \"data\": {\n          \"variables\": [\n            {\n              \"name\": \"ENV_VAR\",\n              \"value\": \"value\"\n            }\n          ]\n        }\n      },\n      \"inputSchema\": {\n        \"type\": \"object\",\n        \"properties\": {\n          \"projectId\": {\n            \"type\": \"string\",\n            \"description\": \"The project ID containing the variables.\"\n          },\n          \"environmentId\": {\n            \"type\": \"string\",\n            \"description\": \"The environment ID for the variables scope.\"\n          },\n          \"serviceId\": {\n            \"type\": \"string\",\n            \"description\": \"Optional service ID if the variables are specific to a service.\"\n          },\n          \"search\": {\n            \"type\": \"string\",\n            \"description\": \"Optional search query to filter environment variables by name.\"\n          }\n        }\n      },\n      \"outputType\": {\n        \"outputType\": \"array\",\n        \"arrayPropertyValue\": \"variables\"\n      }\n    }\n  ],\n  \"authentication\": {\n    \"type\": \"oauth2\",\n    \"authUrl\": \"https://railway.com/account/tokens\",\n    \"tokenUrl\": \"https://railway.com/account/tokens\",\n    \"profileInfoUrl\": \"https://railway.com/api/profile\"\n  },\n  \"serviceJson\": {\n    \"name\": \"railway\",\n    \"label\": \"Railway\",\n    \"category\": \"applications\",\n    \"description\": \"Integration with Railway Cloud platform for managing projects, services, deployments, and environment configurations.\",\n    \"version\": \"1.0.0\",\n    \"icon\": \"https://railway.com/logo.svg\"\n  }\n}"
    }
]