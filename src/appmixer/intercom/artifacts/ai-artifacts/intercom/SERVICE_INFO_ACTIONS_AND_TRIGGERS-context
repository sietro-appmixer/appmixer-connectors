# Intercom Connector - Preparation Context

## Service Overview

Intercom is a customer messaging platform that provides live chat, marketing automation, and customer support tools. The API allows access to conversations, contacts, companies, messages, articles, and other customer data. Key features include managing conversations, creating and updating contacts, sending messages, and accessing customer support tickets.

**Official API Documentation:** https://developers.intercom.com/docs/references/introduction

## Authentication Method

**Type:** OAuth 2.0 Authorization Code Flow (Recommended)

**How it works:**
- Intercom uses OAuth 2.0 for secure API authentication with user-authorized access
- The flow includes authorization code exchange for access tokens
- Authentication is done via the `Authorization: Bearer <access_token>` header

**OAuth 2.0 Endpoints:**
- **Authorization URL (GET):** https://app.intercom.com/oauth
- **Token URL (POST):** https://api.intercom.io/auth/eagle/token
- **Profile Info URL (GET):** https://api.intercom.io/me

**Required Scopes:**
Intercom OAuth apps are granted permissions based on the app configuration rather than explicit scopes in the authorization request. Permissions are configured when creating the app in the Developer Hub.

**Authorization Code Flow:**
1. **Authorization Request:** Direct users to `https://app.intercom.com/oauth` with parameters:
   - `client_id`: Your app's client ID
   - `redirect_uri`: Your registered callback URL  
   - `response_type`: Set to "code"
   - `state`: CSRF protection token

2. **Authorization Code Exchange:** POST to `https://api.intercom.io/auth/eagle/token` with:
   - `code`: Authorization code from callback
   - `client_id`: Your app's client ID
   - `client_secret`: Your app's client secret
   - Content-Type: `application/x-www-form-urlencoded`

3. **Token Response:** Receive access token (no expiration time provided by Intercom)

**Token Management:**
- Intercom access tokens do not expire and do not require refresh tokens
- Tokens remain valid until the user revokes app access or the app is deleted
- Token validation can be performed by calling the `/me` endpoint

**How to obtain OAuth 2.0 credentials:**
1. Create an app at https://app.intercom.com/a/developer-signup
2. Configure your app permissions and redirect URIs in the Developer Hub
3. Find your Client ID and Client Secret in the app configuration
4. Implement the authorization code flow as described above

**Personal Access Tokens (Legacy/Private Apps):**
Personal Access Tokens are still supported for private apps accessing your own workspace data only. These should be used as a fallback for internal tools or testing:
- Obtain PAT from Configure > Authentication section in Developer Hub
- Use with `Authorization: Bearer <access_token>` header
- Not recommended for public integrations or user-facing applications

**Authentication Documentation:** https://developers.intercom.com/docs/build-an-integration/learn-more/authentication

## Planned Components

Based on the API documentation analysis, the following essential components should be implemented:

### Conversations Management
1. **ListConversations** - Retrieve all conversations with pagination support
2. **CreateConversation** - Create a new conversation initiated by a contact
3. **RetrieveConversation** - Get detailed information about a specific conversation
4. **UpdateConversation** - Update conversation properties like title, read status, custom attributes
5. **DeleteConversation** - Delete a conversation
6. **SearchConversations** - Search conversations using filters and criteria
7. **ReplyToConversation** - Reply to a conversation with a message from admin or contact
8. **ManageConversation** - Close, snooze, open, or assign conversations

### Contacts Management
9. **ListContacts** - Retrieve all contacts with pagination
10. **CreateContact** - Create a new contact (lead or user)
11. **RetrieveContact** - Get detailed information about a specific contact
12. **UpdateContact** - Update contact properties, custom attributes
13. **DeleteContact** - Delete a contact
14. **SearchContacts** - Search contacts using filters
15. **AttachContactToCompany** - Associate a contact with a company

### Companies Management
16. **ListCompanies** - Retrieve all companies
17. **CreateCompany** - Create a new company
18. **RetrieveCompany** - Get detailed information about a specific company
19. **UpdateCompany** - Update company properties and custom attributes
20. **DeleteCompany** - Delete a company
21. **SearchCompanies** - Search companies using filters

### Messages
22. **SendMessage** - Send messages to contacts (emails, in-app messages)
23. **ListMessages** - Retrieve sent messages

### Tags Management
24. **ListTags** - Retrieve all available tags
25. **CreateTag** - Create a new tag
26. **AttachTagToContact** - Add a tag to a contact
27. **DetachTagFromContact** - Remove a tag from a contact
28. **AttachTagToConversation** - Add a tag to a conversation
29. **DetachTagFromConversation** - Remove a tag from a conversation

### Notes
30. **ListContactNotes** - Retrieve notes for a specific contact
31. **CreateContactNote** - Add a note to a contact
32. **RetrieveNote** - Get details of a specific note

### Articles & Help Center
33. **ListArticles** - Retrieve all articles from the help center
34. **CreateArticle** - Create a new help center article
35. **UpdateArticle** - Update an existing article
36. **DeleteArticle** - Delete an article
37. **SearchArticles** - Search articles by content

### Teams & Admins
38. **ListTeams** - Retrieve all teams
39. **ListAdmins** - Retrieve all admin users
40. **RetrieveAdmin** - Get details of a specific admin

## API Characteristics

- **Base URL:** https://api.intercom.io/
- **API Version:** 2.14 (specified via Intercom-Version header)
- **Authentication:** Bearer token in Authorization header
- **Response Format:** JSON
- **Pagination:** Cursor-based pagination for most list endpoints
- **Rate Limiting:** API has rate limits that should be respected
- **Error Handling:** Standard HTTP status codes with detailed error messages

## Key API Features

1. **Pagination**: Most list endpoints support cursor-based pagination with `starting_after` parameter
2. **Search**: Advanced search capabilities for conversations, contacts, and companies with complex query filters
3. **Custom Attributes**: Support for custom attributes on contacts, companies, and conversations
4. **Webhooks**: Support for webhook integrations (not covered in this connector but available in the API)
5. **Bulk Operations**: Some endpoints support bulk operations for efficiency
6. **File Attachments**: Support for file attachments in conversations and messages

## Implementation Priority

### Phase 1 (Core Features):
- ListContacts, CreateContact, UpdateContact, RetrieveContact
- ListConversations, CreateConversation, RetrieveConversation, ReplyToConversation
- ListCompanies, CreateCompany, UpdateCompany, RetrieveCompany
- SendMessage

### Phase 2 (Extended Features):
- Search operations for contacts, conversations, companies
- Tag management operations
- Conversation management (close, assign, etc.)
- Notes management

### Phase 3 (Advanced Features):
- Articles and help center management
- Teams and admin management
- Delete operations
- Advanced conversation features

This connector will provide comprehensive integration with Intercom's customer messaging platform, enabling users to manage customer communications, contacts, and support workflows through Appmixer.