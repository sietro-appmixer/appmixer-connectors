{
    "name": "appmixer.slack.list.FindRequestApprovals",
    "label": "Find Request Approvals",
    "author": "Appmixer <info@appmixer.com>",
    "icon": "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICA8ZyBpZD0iR3JvdXBfNTQ2IiBkYXRhLW5hbWU9Ikdyb3VwIDU0NiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTM3NiAtMTA1KSI+CiAgICA8cmVjdCBpZD0iUmVjdGFuZ2xlXzMzMjgiIGRhdGEtbmFtZT0iUmVjdGFuZ2xlIDMzMjgiIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMzc2IDEwNSkiIGZpbGw9IiNmZmYiLz4KICAgIDxnIGlkPSJTbGFja19NYXJrIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgzMDUuNCAzNC40KSI+CiAgICAgIDxnIGlkPSJHcm91cF8xNzIiIGRhdGEtbmFtZT0iR3JvdXAgMTcyIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg3My42IDgzLjA4NCkiPgogICAgICAgIDxwYXRoIGlkPSJQYXRoXzI2MCIgZGF0YS1uYW1lPSJQYXRoIDI2MCIgZD0iTTc3LjM4MiwxNDAuMTkxYTEuODkxLDEuODkxLDAsMSwxLTEuODkxLTEuODkxaDEuODkxWiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTczLjYgLTEzOC4zKSIgZmlsbD0iI2UwMWU1YSIvPgogICAgICAgIDxwYXRoIGlkPSJQYXRoXzI2MSIgZGF0YS1uYW1lPSJQYXRoIDI2MSIgZD0iTTEwNS45LDE0MC4xOTFhMS44OTEsMS44OTEsMCwxLDEsMy43ODIsMHY0LjczNWExLjg5MSwxLjg5MSwwLDAsMS0zLjc4MiwwWiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTEwMS4xNjUgLTEzOC4zKSIgZmlsbD0iI2UwMWU1YSIvPgogICAgICA8L2c+CiAgICAgIDxnIGlkPSJHcm91cF8xNzMiIGRhdGEtbmFtZT0iR3JvdXAgMTczIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg3My42IDczLjYpIj4KICAgICAgICA8cGF0aCBpZD0iUGF0aF8yNjIiIGRhdGEtbmFtZT0iUGF0aCAyNjIiIGQ9Ik0xMDcuNzkxLDc3LjM4MmExLjg5MSwxLjg5MSwwLDEsMSwxLjg5MS0xLjg5MXYxLjg5MVoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0xMDEuMTY1IC03My42KSIgZmlsbD0iIzM2YzVmMCIvPgogICAgICAgIDxwYXRoIGlkPSJQYXRoXzI2MyIgZGF0YS1uYW1lPSJQYXRoIDI2MyIgZD0iTTgwLjIyNSwxMDUuOWExLjg5MSwxLjg5MSwwLDEsMSwwLDMuNzgySDc1LjQ5MWExLjg5MSwxLjg5MSwwLDEsMSwwLTMuNzgyWiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTczLjYgLTEwMS4xNjUpIiBmaWxsPSIjMzZjNWYwIi8+CiAgICAgIDwvZz4KICAgICAgPGcgaWQ9Ikdyb3VwXzE3NCIgZGF0YS1uYW1lPSJHcm91cCAxNzQiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDgzLjA4NCA3My42KSI+CiAgICAgICAgPHBhdGggaWQ9IlBhdGhfMjY0IiBkYXRhLW5hbWU9IlBhdGggMjY0IiBkPSJNMTcwLjYsMTA3Ljc5MWExLjg5MSwxLjg5MSwwLDEsMSwxLjg5MSwxLjg5MUgxNzAuNloiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0xNjUuODY1IC0xMDEuMTY1KSIgZmlsbD0iIzJlYjY3ZCIvPgogICAgICAgIDxwYXRoIGlkPSJQYXRoXzI2NSIgZGF0YS1uYW1lPSJQYXRoIDI2NSIgZD0iTTE0Mi4wODIsODAuMjI1YTEuODkxLDEuODkxLDAsMSwxLTMuNzgyLDBWNzUuNDkxYTEuODkxLDEuODkxLDAsMSwxLDMuNzgyLDBaIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMTM4LjMgLTczLjYpIiBmaWxsPSIjMmViNjdkIi8+CiAgICAgIDwvZz4KICAgICAgPGcgaWQ9Ikdyb3VwXzE3NSIgZGF0YS1uYW1lPSJHcm91cCAxNzUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDgzLjA4NCA4My4wODQpIj4KICAgICAgICA8cGF0aCBpZD0iUGF0aF8yNjYiIGRhdGEtbmFtZT0iUGF0aCAyNjYiIGQ9Ik0xNDAuMTkxLDE3MC42YTEuODkxLDEuODkxLDAsMSwxLTEuODkxLDEuODkxVjE3MC42WiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTEzOC4zIC0xNjUuODY1KSIgZmlsbD0iI2VjYjIyZSIvPgogICAgICAgIDxwYXRoIGlkPSJQYXRoXzI2NyIgZGF0YS1uYW1lPSJQYXRoIDI2NyIgZD0iTTE0MC4xOTEsMTQyLjA4MmExLjg5MSwxLjg5MSwwLDEsMSwwLTMuNzgyaDQuNzM1YTEuODkxLDEuODkxLDAsMCwxLDAsMy43ODJaIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMTM4LjMgLTEzOC4zKSIgZmlsbD0iI2VjYjIyZSIvPgogICAgICA8L2c+CiAgICA8L2c+CiAgPC9nPgo8L3N2Zz4K",
    "description": "Find and filter request approvals by status, type, title, requester, or approver.",
    "private": true,
    "auth": {
        "service": "appmixer:slack",
        "scope": [
            "users:read"
        ]
    },
    "quota": {
        "manager": "appmixer:slack:list",
        "resources": "request",
        "scope": {
            "userId": "{{userId}}"
        }
    },
    "inPorts": [
        {
            "name": "in",
            "schema": {
                "type": "object",
                "properties": {
                    "status": { "type": "string" },
                    "title": { "type": "string" },
                    "requester": { "type": "string" },
                    "approver": { "type": "string" },
                    "limit": { "type": "number", "minimum": 1 },
                    "outputType": { "type": "string" }
                },
                "required": []
            },
            "inspector": {
                "inputs": {
                    "status": {
                        "type": "select",
                        "label": "Status",
                        "tooltip": "Filter by approval status",
                        "index": 2,
                        "options": [
                            { "label": "All", "value": "all" },
                            { "label": "Pending", "value": "pending" },
                            { "label": "Approved", "value": "approved" },
                            { "label": "Rejected", "value": "rejected" },
                            { "label": "Due", "value": "due" }
                        ]
                    },
                    "title": {
                        "type": "text",
                        "label": "Title",
                        "tooltip": "Filter by title (partial match, optional)",
                        "index": 3
                    },
                    "requester": {
                        "type": "select",
                        "label": "Requester",
                        "tooltip": "Filter by requester",
                        "index": 4,
                        "source": {
                            "url": "/component/appmixer/slack/list/ListUsers?outPort=out",
                            "data": {
                                "transform": "./transformers#usersToSelectArray",
                                "messages": {
                                    "in/outputType": "array",
                                    "in/isSource": true
                                }
                            }
                        }
                    },
                    "approver": {
                        "type": "select",
                        "label": "Approver",
                        "tooltip": "Filter by approver",
                        "index": 5,
                        "source": {
                            "url": "/component/appmixer/slack/list/ListUsers?outPort=out",
                            "data": {
                                "transform": "./transformers#usersToSelectArray",
                                "messages": {
                                    "in/outputType": "array",
                                    "in/isSource": true
                                }
                            }
                        }
                    },
                    "limit": {
                        "type": "number",
                        "label": "Limit",
                        "tooltip": "The maximum number of approvals to fetch. Default limit is 100.",
                        "index": 6
                    },
                    "outputType": {
                        "type": "select",
                        "label": "Output Type",
                        "index": 7,
                        "defaultValue": "array",
                        "tooltip": "Choose whether you want to receive the result set as one complete list, one item at a time or stream the items to a file. For large datasets, streaming the rows to a file is the most efficient method.",
                        "options": [
                            { "label": "First Found", "value": "first" },
                            { "label": "All at once", "value": "array" },
                            { "label": "One at a time", "value": "object" },
                            { "label": "File", "value": "file" }
                        ]
                    }
                }
            }
        }
    ],
    "outPorts": [
        {
            "name": "out",
            "source": {
                "url": "/component/appmixer/slack/list/FindRequestApprovals?outPort=out",
                "data": {
                    "properties": {
                        "generateOutputPortOptions": true
                    },
                    "messages": {
                        "in/outputType": "inputs/in/outputType"
                    }
                }
            }
        }
    ]
}
