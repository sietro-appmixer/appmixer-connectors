{
    "name": "appmixer.resend.email.SendBatchEmails",
    "description": "Trigger up to 100 batch emails at once.",
    "author": "Appmixer <info@appmixer.com>",
    "version": "1.0.0",
    "private": false,
    "auth": {
        "service": "appmixer:resend"
    },
    "quota": {
        "manager": "appmixer:resend",
        "resources": "requests",
        "maxWait": 2000,
        "scope": {
            "userId": "{{userId}}"
        }
    },
    "inPorts": [
        {
            "name": "in",
            "schema": {
                "type": "object",
                "properties": {
                    "emails": {
                        "type": "object"
                    },
                    "idempotency_key": {
                        "type": "string"
                    }
                },
                "required": ["emails"]
            },
            "inspector": {
                "inputs": {
                    "emails": {
                        "type": "expression",
                        "index": 1,
                        "label": "Emails",
                        "tooltip": "Add multiple emails to send in batch. Maximum 100 emails per batch.",
                        "levels": [ "ADD" ],
                        "fields": {
                            "from": {
                                "type": "text",
                                "label": "From",
                                "tooltip": "Sender email address. To include a friendly name, use the format 'Your Name <sender@domain.com>'.",
                                "required": true
                            },
                            "to": {
                                "type": "textarea",
                                "label": "To",
                                "tooltip": "Recipient email address. For multiple addresses, the values must be separated by a comma, space or newline. Max 50.",
                                "required": true
                            },
                            "subject": {
                                "type": "text",
                                "label": "Subject",
                                "tooltip": "Email subject.",
                                "required": true
                            },
                            "html": {
                                "type": "textarea",
                                "label": "HTML Body",
                                "tooltip": "The HTML version of the message."
                            },
                            "text": {
                                "type": "textarea",
                                "label": "Text Body",
                                "tooltip": "The plain text version of the message."
                            },
                            "cc": {
                                "type": "textarea",
                                "label": "CC",
                                "tooltip": "CC recipient email address. For multiple addresses, the values must be separated by a comma, space or newline."
                            },
                            "bcc": {
                                "type": "textarea",
                                "label": "BCC",
                                "tooltip": "BCC recipient email address. For multiple addresses, the values must be separated by a comma, space or newline."
                            },
                            "reply_to": {
                                "type": "textarea",
                                "label": "Reply To",
                                "tooltip": "Reply-to email address. For multiple addresses, the values must be separated by a comma, space or newline."
                            },
                            "headers": {
                                "type": "textarea",
                                "label": "Headers",
                                "tooltip": "Custom headers to add to the email. Use JSON format, e.g., {\"X-Custom-Header\": \"Value\"}."
                            }
                        }
                    },
                    "idempotency_key": {
                        "type": "text",
                        "index": 2,
                        "label": "Idempotency Key",
                        "tooltip": "Add an idempotency key to prevent duplicated emails. Should be unique per API request."
                    }
                }
            }
        }
    ],
    "outPorts": [
        {
            "name": "out",
            "options": [
                {
                    "label": "Email IDs",
                    "value": "data",
                    "schema": {
                        "type": "array",
                        "items": {
                            "type": "object",
                            "properties": {
                                "id": {
                                    "type": "string",
                                    "title": "Email ID"
                                }
                            }
                        }
                    }
                },
                {
                    "label": "Batch Count",
                    "value": "count",
                    "schema": {
                        "type": "integer",
                        "title": "Number of emails sent"
                    }
                }
            ]
        }
    ],
    "icon": "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTgwMCIgaGVpZ2h0PSIxODAwIiB2aWV3Qm94PSIwIDAgMTgwMCAxODAwIiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8cGF0aCBkPSJNMTAwMC40NiA0NTBDMTE3NC43NyA0NTAgMTI3OC40MyA1NTMuNjY5IDEyNzguNDMgNjkxLjI4MkMxMjc4LjQzIDgyOC44OTYgMTE3NC43NyA5MzIuNTYzIDEwMDAuNDYgOTMyLjU2M0g5MTIuMzgyTDEzNTAgMTM1MEgxMDQwLjgyTDcwNy43OTQgMTAzMy40OEM2ODMuOTQ0IDEwMTEuNDcgNjcyLjkzNiA5ODUuNzgxIDY3Mi45MzUgOTYzLjc2NUM2NzIuOTM1IDkzMi41NzIgNjk0Ljk1OSA5MDUuMDQ5IDczNy4xNjEgODkzLjEyMkw5MDguNzEyIDg0Ny4yNDRDOTczLjg1IDgyOS44MTIgMTAxOC44MSA3NzkuMzUzIDEwMTguODEgNzEzLjI5OEMxMDE4LjggNjMyLjU2NyA5NTIuNzQ1IDU4NS43OCA4NzEuMDk1IDU4NS43OEg0NTBWNDUwSDEwMDAuNDZaIiBmaWxsPSJibGFjayIvPgo8L3N2Zz4K"
}
