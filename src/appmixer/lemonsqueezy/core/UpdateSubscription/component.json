{
    "name": "appmixer.lemonsqueezy.core.UpdateSubscription",
    "label": "Update Subscription",
    "description": "Update an existing subscription's billing information, pause/unpause, or change other settings.",
    "author": "Appmixer <info@appmixer.com>",
    "version": "1.0.0",
    "auth": {
        "service": "appmixer:lemonsqueezy"
    },
    "inPorts": [
        {
            "name": "in",
            "schema": {
                "type": "object",
                "properties": {
                    "subscriptionId": {
                        "type": "string"
                    },
                    "variantId": {
                        "type": "integer"
                    },
                    "pauseMode": {
                        "type": "string",
                        "enum": ["void", "free", "unpause"]
                    },
                    "pauseResumesAt": {
                        "type": "string"
                    },
                    "cancelled": {
                        "type": "boolean"
                    },
                    "trialEndsAt": {
                        "type": "string"
                    },
                    "billingAnchor": {
                        "type": "integer"
                    },
                    "invoiceImmediately": {
                        "type": "boolean"
                    },
                    "disableProrations": {
                        "type": "boolean"
                    }
                },
                "required": ["subscriptionId"]
            },
            "inspector": {
                "inputs": {
                    "subscriptionId": {
                        "label": "Subscription ID",
                        "type": "text",
                        "index": 1,
                        "tooltip": "Enter the ID of the subscription you want to update"
                    },
                    "variantId": {
                        "label": "Variant ID",
                        "type": "number",
                        "index": 2,
                        "tooltip": "The product variant ID to change the subscription to"
                    },
                    "pauseMode": {
                        "label": "Pause Mode",
                        "type": "select",
                        "index": 3,
                        "tooltip": "Mode for pausing subscription",
                        "options": [
                            { "label": "Void (pause immediately)", "value": "void" },
                            { "label": "Free (pause at end of billing period)", "value": "free" },
                            { "label": "Unpause (resume subscription)", "value": "unpause" }
                        ]
                    },
                    "pauseResumesAt": {
                        "label": "Pause Resumes At",
                        "type": "date-time",
                        "index": 4,
                        "tooltip": "Date when subscription should resume (optional - can be used with void or free modes)"
                    },
                    "cancelled": {
                        "label": "Cancelled",
                        "type": "toggle",
                        "index": 5,
                        "tooltip": "Toggle to cancel the subscription"
                    },
                    "trialEndsAt": {
                        "label": "Trial Ends At",
                        "type": "date-time",
                        "index": 6,
                        "tooltip": "Date when trial ends"
                    },
                    "billingAnchor": {
                        "label": "Billing Anchor",
                        "type": "number",
                        "index": 7,
                        "tooltip": "Day of the month for billing anchor (1-31)"
                    },
                    "invoiceImmediately": {
                        "label": "Invoice Immediately",
                        "type": "toggle",
                        "index": 8,
                        "tooltip": "Whether to generate an invoice immediately"
                    },
                    "disableProrations": {
                        "label": "Disable Prorations",
                        "type": "toggle",
                        "index": 9,
                        "tooltip": "Whether to disable proration calculations"
                    }
                }
            }
        }
    ],
    "outPorts": [
        {
            "name": "out",
            "options": [
                { "label": "Subscription ID", "value": "id" },
                { "label": "Store ID", "value": "storeId" },
                { "label": "Customer ID", "value": "customerId" },
                { "label": "Order ID", "value": "orderId" },
                { "label": "Product ID", "value": "productId" },
                { "label": "Variant ID", "value": "variantId" },
                { "label": "Status", "value": "status" },
                { "label": "Pause", "value": "pause" },
                { "label": "Cancelled", "value": "cancelled" },
                { "label": "Trial Ends At", "value": "trialEndsAt" },
                { "label": "Billing Anchor", "value": "billingAnchor" },
                { "label": "Created At", "value": "createdAt" },
                { "label": "Updated At", "value": "updatedAt" },
                { "label": "Ends At", "value": "endsAt" },
                { "label": "Renews At", "value": "renewsAt" }
            ]
        }
    ],
    "icon": "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHZpZXdCb3g9IjAgMCA0MCA0MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMjAiIGN5PSIyMCIgcj0iMjAiIGZpbGw9IiNGRkQ5MTYiLz4KPHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4PSI4IiB5PSI4Ij4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik05IDQuNUE0LjUgNC41IDAgMDE0LjUgOUExIDEgMCAwMDEzIDlBMy41IDMuNSAwIDAwOS41IDEyLjVIMTFhMSAxIDAgMDEwIDJIOS41QTMuNSAzLjUgMCAwMDEzIDE4YTEgMSAwIDEwMi0wQTQuNSA0LjUgMCAwMDkgNC41eiIgZmlsbD0iIzFFMUUxRSIvPgo8L3N2Zz4KPC9zdmc+"
}
